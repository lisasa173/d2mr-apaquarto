<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Natalie Dowling">
<meta name="keywords" content="R programming, ggplot2, data communication">
<meta name="description" content="APAQUARTO EXAMPLE">

<title>Example APA7 Manuscript Made with Quarto and apaquarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="apaquarto-manuscript_files/libs/clipboard/clipboard.min.js"></script>
<script src="apaquarto-manuscript_files/libs/quarto-html/quarto.js"></script>
<script src="apaquarto-manuscript_files/libs/quarto-html/popper.min.js"></script>
<script src="apaquarto-manuscript_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="apaquarto-manuscript_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="apaquarto-manuscript_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="apaquarto-manuscript_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="apaquarto-manuscript_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="apaquarto-manuscript_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="_extensions/wjschne/apaquarto/apa.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="apaquarto-manuscript.docx"><i class="bi bi-file-word"></i>MS Word (apaquarto)</a></li><li><a href="apaquarto-manuscript.pdf"><i class="bi bi-file-pdf"></i>Typst (apaquarto)</a></li><li><a href="apaquarto-manuscript.pdf"><i class="bi bi-file-pdf"></i>PDF (apaquarto)</a></li></ul></div></div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">




<br>

<br>

<section id="title" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">Example APA7 Manuscript Made with Quarto and apaquarto</h1>
<div class="Author">
<br>

<p>Natalie Dowling</p>
<p>MA Program in the Social Sciences, University of Chicago</p>
</div>
</section>
<section id="author-note" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Author Note</h1>
<p>This example is based on the apaquarto template, created by W. Joel Schneider as part of the apaquarto extension for the Quarto publishing system. The author is grateful Dr.&nbsp;Marisa Casillas for creating the original version of this course.</p>
<p>Author roles were classified using the Contributor Role Taxonomy (CRediT; https://credit.niso.org/) as follows: <em>Natalie Dowling</em><strong>: </strong>conceptualization and writing – original draft</p>
<p>Correspondence concerning this article should be addressed to Natalie Dowling, MA Program in the Social Sciences, University of Chicago, 1155 E 60th St., Chicago, IL 60637, USA, Email: ndowling@uchicago.edu</p>
</section>
<section id="abstract" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Abstract</h1>
<div class="AbstractFirstParagraph">
<p>This document is a template demonstrating the apaquarto format. It includes examples of how to create figures and tables, as well as how to reference them in the text. The document is written in Quarto, a system for creating documents with R Markdown. The apaquarto extension provides a template for creating APA7-formatted manuscripts.</p>
</div>
<p><em>Keywords</em>: R programming, ggplot2, data communication</p>
</section>
<section id="firstheader" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">Example APA7 Manuscript Made with Quarto and apaquarto</h1>
<section id="introduction" class="level2">
<h2 data-anchor-id="introduction">Introduction</h2>
<p>This document is a template demonstrating the apaquarto format, to be used in the course From Data to Manuscript in R <span class="citation" data-cites="dowling_2025_data">(<a href="#ref-dowling_2025_data" role="doc-biblioref">Dowling, 2025</a>)</span>. It includes examples of how to create figures and tables, as well as how to reference them in the text. The document is written in Quarto, a system for creating documents with R Markdown. The apaquarto extension provides a template for creating APA7-formatted manuscripts.</p>
<p>When rendered into html, pdf, or Word, this example produces an APA styled manuscript. Although the contents of the manuscript are not what you would expect in a psychology journal article, the formatting should demonstrate both the capabilities of the apaquarto extension and the basic template an actual manuscript would follow.</p>
<p>You can learn more about APA style in the <a href="https://apastyle.apa.org/">APA Style Manual</a>. Details about creating documents using <span class="citation" data-cites="schneider_2025_apaquarto">Schneider (<a href="#ref-schneider_2025_apaquarto" role="doc-biblioref">2025</a>)</span> in the <a href="https://wjschne.github.io/apaquarto/">documentation</a>.</p>
<p>The example demonstrates the mechanics of markdown manuscripts using Quarto and the apaquarto extension, specifically. While many of the topics covered are the same in other markdown systems, like the older R Markdown or the <code>papaja</code> package, the specific syntax and options may differ.</p>
<p>Your introduction should be a clear and concise explanation of the research question, the background of the problem, and the purpose of the study. It should include both a <a href="#sec-lit-review">Literature Review</a> and <a href="#sec-present-study">Present Study</a> section.</p>
<section id="sec-lit-review" class="level3">
<h3 data-anchor-id="sec-lit-review">Literature Review</h3>
<p>The literature review includes citations to relevant research and other sources. Citing sources requires formatting according to some standardized style, like APA or Chicago Manual of Style. In this document, build with apaquarto, you should not be surprised to learn that we use APA style.</p>
<p>Information about your references are stored in a consolidated .bib file, typically located in the same directory as your manuscript and conventionally named <code>bibliography.bib</code>. The bib file contains all the information needed to cite a source, including the author, title, publication date, and other relevant information. The information for any single source is attached to a unique key, which you can then use to cite the source in your text. You can reference a source from your bibliography the same way you’d reference a figure, table, or document section: with the <code>@</code> symbol followed by the key.</p>
<p>For example, many of the readings for this class come from Hadley Wickham’s book <em>R for Data Science</em>. To cite this book, you would use <code>@wickhametal_2023_data</code> (the key assigned to it in the bibliography file). This will render as (Wickham, 2023) in the text and as a full citation in the references section at the end of the document.</p>
<p>There are a few different formats you’ll need to know for citing sources in your text. Most commonly, you’ll want to cite the author(s) and the year of publication within a parenthetical citations (e.g., “Wickham, 2023”). Also common is the author name(s) in the text and then only the year in parentheses (e.g., “Wickham (2023)”).</p>
<p>There’s simple syntax to do each of these with bibtex keys, but you can do more complex things, too. You can (among other things) cite multiple sources at once and have them automatically be alphabetized and formatted, specify chapters and page number, and add in-parenthetical information like “see also” or “for more information.” Let’s see some in action:</p>
<p><span class="citation" data-cites="dowling_2025_data">Dowling (<a href="#ref-dowling_2025_data" role="doc-biblioref">2025</a>)</span> claims that Quarto is awesome. In fact, in Dowling’s UChicago course on the topic <span class="citation" data-cites="dowling_2025_data">(<a href="#ref-dowling_2025_data" role="doc-biblioref">2025</a>)</span>, she never seems to stop saying that RMarkdown is awesome. Of course, it is well established that RMarkdown and Quarto are, indeed, awesome <span class="citation" data-cites="xie_2018_bookdown dowling_2025_data schneider_2025_apaquarto">(<a href="#ref-dowling_2025_data" role="doc-biblioref">Dowling, 2025</a>; <a href="#ref-schneider_2025_apaquarto" role="doc-biblioref">Schneider, 2025</a>; <a href="#ref-xie_2018_bookdown" role="doc-biblioref">Xie, 2018</a>)</span>. Nearly everyone agrees on this very obvious point <span class="citation" data-cites="xie_2018_bookdown dowling_2025_data">(<a href="#ref-dowling_2025_data" role="doc-biblioref">Dowling, 2025</a>; e.g., <a href="#ref-xie_2018_bookdown" role="doc-biblioref">Xie, 2018</a>)</span>.</p>
<p>You can include notes, like the “e.g.,” in the examples above, by simply adding it at the beginning of the list of keys. The added text will get “attached to” the first citation, so it’s important that you put it before whichever citation will actually show up first.</p>
<p>For the most part, BibTeX will also handle alphabetical ordering of multiple citations within the same parenthetical citation <span class="citation" data-cites="wickhametal_2023_data dowling_2025_data">(<a href="#ref-dowling_2025_data" role="doc-biblioref">Dowling, 2025</a>; <a href="#ref-wickhametal_2023_data" role="doc-biblioref">Wickham, Cetinkaya-Rundel, et al., 2023</a>)</span>. That means that in the example in the previous paragraph, the text is attached to the “Xie” citation and so will render between “Dowling” and “Xie” once they are ordered.</p>
<p>Oddly, if you put the extra text after the semicolon, it seems to just stop trying to order the citations and will render them in the order you put them in the text.</p>
<p>If you use citr to add references, it will do the sorting before it adds the keys to your document, so you don’t have to worry about any of that</p>
<p>In BibTeX, same-year, same-author publications are automatically disambiguated <span class="citation" data-cites="heritage_2012_epistemic heritage_2012_epistemics">(<a href="#ref-heritage_2012_epistemic" role="doc-biblioref">Heritage, 2012b</a>, <a href="#ref-heritage_2012_epistemics" role="doc-biblioref">2012a</a>)</span>.</p>
<p>You can also include page numbers or chapters in your citations. For example, you can cite a specific chapter in a book like this: <span class="citation" data-cites="wickham_2016_ggplot2">(<a href="#ref-wickham_2016_ggplot2" role="doc-biblioref">Wickham, 2016a</a>, ch.&nbsp;1)</span>. This will render as (Wickham, 2016, ch.&nbsp;1) in the text and as a full citation in the references section at the end of the document. We learned all about ggplot <span class="citation" data-cites="wickham_2016_ggplot2">(see <a href="#ref-wickham_2016_ggplot2" role="doc-biblioref">Wickham, 2016a</a>, ch.&nbsp;1)</span>. The best introduction to ggplot is with <span class="citation" data-cites="wickham_2016_ggplot2">Wickham (<a href="#ref-wickham_2016_ggplot2" role="doc-biblioref">2016a</a>, ch.&nbsp;1)</span>.</p>
<p>You know what else is awesome besides RMarkdown? Interactive gestures, which allow interlocutors to expediently facilitate conversation nonverbally <span class="citation" data-cites="bavelasetal_1992_interactive dowling_2022_obviously">(<a href="#ref-bavelasetal_1992_interactive" role="doc-biblioref">Bavelas et al., 1992</a>; <a href="#ref-dowling_2022_obviously" role="doc-biblioref">Dowling, 2022</a>)</span>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Brackets and hyphens allows you to specify which part of the citation to include in parentheses (or at all). Briefly, brackets say the whole thing (whatever that may be) should be in parentheses and hyphens say the author name should be excluded.</p>
<ul>
<li>Brackets: <code>[@dowling_2025_data]</code> <span class="citation" data-cites="dowling_2025_data">(<a href="#ref-dowling_2025_data" role="doc-biblioref">Dowling, 2025</a>)</span></li>
<li>No brackets: <code>@dowling_2025_data</code> <span class="citation" data-cites="dowling_2025_data">Dowling (<a href="#ref-dowling_2025_data" role="doc-biblioref">2025</a>)</span></li>
<li>Brackets and hyphen: <code>[-@dowling_2025_data]</code> <span class="citation" data-cites="dowling_2025_data">(<a href="#ref-dowling_2025_data" role="doc-biblioref">2025</a>)</span></li>
</ul>
<!-- THIS BIT ABOUT REFERENCING SUBSECTIONS AND NOCITE NEEDS TO BE UPDATED FOR APAQUARTO -->
<!-- We summarize our findings in subsection \@ref(disc) and note that subsection \@ref(refs)[^2] is unrelated to this report. Several texts used in the preparation of this manuscript but not directly cited are included in the references section because they are placed within the `nocite` section near the end of the RMarkdown document. -->
<!-- [^2]: These two numbered references for the Discussion and References sections are generated dynamically by including a section label `{#whatever}` in the markdown header for the section. -->
</section>
<section id="sec-present-study" class="level3">
<h3 data-anchor-id="sec-present-study">Present Study</h3>
<p>The present “study” is a demonstration of the capabilities of the apaquarto extension for Quarto. It’s not a study, but whatever. This is the present study section.</p>
</section>
</section>
<section id="methods" class="level2">
<h2 data-anchor-id="methods">Methods</h2>
<p>In this section, we will go over how to create, render, and reference tables in apaquarto documents.</p>
<p>At some point in your methods section, you’ll want to say that you used R, and you may want to call out specific packages used for statistical analyses or plotting. You can do that automatically with the <code>papaja::r_refs()</code> and <code>papaja::cite_r()</code> functions.</p>
<p>This process has three steps:</p>
<ol type="1">
<li>Modify the YAML bibliography option to be a bracketed list of both the .bib file you’re using for your regular references and a separate .bib file for your R references. For example, <code>bibliography: [bibliography.bib, r-references.bib]</code>.</li>
<li>In a setup chunk at the beginning of your document, call <code>papaja::r_refs()</code> to generate the references for the packages you used in the specified .bib file. Run this <em>after</em> you load the packages you want to cite. Useful arguments:
<ol type="1">
<li>(Required) <code>file</code>: The name of the file you specified in the YAML bibliography option. The function will create the file if it doesn’t exist and overwrite it if it does.</li>
<li>(Optional) <code>append = TRUE</code>: Set to <code>FALSE</code> to overwrite the file rather than add on missing references to the end. Useful if you are trying out different packages and know you won’t end up using them all.</li>
<li>(Optional) <code>tweak = TRUE</code>: This function is a wrapper for <code>create_bib()</code>, and <code>tweak = TRUE</code> fixes some known issues with <code>create_bib()</code>. If it’s not working as expected, you can try setting <code>tweak = FALSE</code> and see if that helps.</li>
</ol></li>
<li>In the text, call <code>papaja::cite_r()</code> to insert the references where you want them. Useful arguments (all are optional):
<ol type="1">
<li>(Treat this like it’s required) <code>file = NULL</code>: To use this like we want, set this to name of the file you specified in the YAML bibliography option. This is the same file you used in <code>r_refs()</code>. If you don’t specify it, the default is <code>NULL</code>, which will cite <code>R</code> itself but no packages.</li>
<li><code>footnote = FALSE</code>: By default, prints where you put it. If you set this to <code>TRUE</code>, it will print the references as a footnote. This is useful if you have a lot of packages and don’t want to clutter up your text.</li>
<li><code>pkgs = NULL</code>: If you only want to cite specific packages, you can list them here. This is useful if you have a lot of packages and only want to cite a few.</li>
<li><code>omit = FALSE</code>: Use together with <code>pkgs</code>. Set this to <code>TRUE</code> to <em>omit</em> the packages listed in <code>pkgs</code> from the citation.</li>
</ol></li>
</ol>
<p>There are other ways to do this, and considering papaja doesn’t get regular updates it may be best to find a more reliable alternative. You can read about one other way to do so <a href="https://bookdown.org/yihui/rmarkdown-cookbook/write-bib.html">here</a> and do some googling for other options. At least for now the papaja functions are working and (IMO) easier to use.</p>
<p>We used R <span class="citation" data-cites="R-base">(Version 4.4.2; <a href="#ref-R-base" role="doc-biblioref">R Core Team, 2024</a>)</span> and the R-packages <em>broom</em> <span class="citation" data-cites="R-broom">(Version 1.0.7; <a href="#ref-R-broom" role="doc-biblioref">Robinson et al., 2024</a>)</span>, <em>conflicted</em> <span class="citation" data-cites="R-conflicted">(Version 1.2.0; <a href="#ref-R-conflicted" role="doc-biblioref">Wickham, 2023a</a>)</span>, <em>dplyr</em> <span class="citation" data-cites="R-dplyr">(Version 1.1.4; <a href="#ref-R-dplyr" role="doc-biblioref">Wickham, François, et al., 2023</a>)</span>, <em>flextable</em> <span class="citation" data-cites="R-flextable">(Version 0.9.7; <a href="#ref-R-flextable" role="doc-biblioref">Gohel &amp; Skintzos, 2024</a>)</span>, <em>forcats</em> <span class="citation" data-cites="R-forcats">(Version 1.0.0; <a href="#ref-R-forcats" role="doc-biblioref">Wickham, 2023b</a>)</span>, <em>ftExtra</em> <span class="citation" data-cites="R-ftExtra">(Version 0.6.4; <a href="#ref-R-ftExtra" role="doc-biblioref">Yasumoto, 2024</a>)</span>, <em>ggplot2</em> <span class="citation" data-cites="R-ggplot2">(Version 3.5.1; <a href="#ref-R-ggplot2" role="doc-biblioref">Wickham, 2016b</a>)</span>, <em>knitr</em> <span class="citation" data-cites="R-knitr">(Version 1.49; <a href="#ref-R-knitr" role="doc-biblioref">Xie, 2015</a>)</span>, <em>lubridate</em> <span class="citation" data-cites="R-lubridate">(Version 1.9.4; <a href="#ref-R-lubridate" role="doc-biblioref">Grolemund &amp; Wickham, 2011</a>)</span>, <em>papaja</em> <span class="citation" data-cites="R-papaja">(Version 0.1.3; <a href="#ref-R-papaja" role="doc-biblioref">Aust &amp; Barth, 2024</a>)</span>, <em>purrr</em> <span class="citation" data-cites="R-purrr">(Version 1.0.4; <a href="#ref-R-purrr" role="doc-biblioref">Wickham &amp; Henry, 2025</a>)</span>, <em>readr</em> <span class="citation" data-cites="R-readr">(Version 2.1.5; <a href="#ref-R-readr" role="doc-biblioref">Wickham, Hester, et al., 2024</a>)</span>, <em>shiny</em> <span class="citation" data-cites="R-shiny">(Version 1.10.0; <a href="#ref-R-shiny" role="doc-biblioref">Chang et al., 2024</a>)</span>, <em>stringr</em> <span class="citation" data-cites="R-stringr">(Version 1.5.1; <a href="#ref-R-stringr" role="doc-biblioref">Wickham, 2023c</a>)</span>, <em>tibble</em> <span class="citation" data-cites="R-tibble">(Version 3.2.1; <a href="#ref-R-tibble" role="doc-biblioref">Müller &amp; Wickham, 2023</a>)</span>, <em>tidyr</em> <span class="citation" data-cites="R-tidyr">(Version 1.3.1; <a href="#ref-R-tidyr" role="doc-biblioref">Wickham, Vaughan, et al., 2024</a>)</span>, <em>tidyverse</em> <span class="citation" data-cites="R-tidyverse">(Version 2.0.0; <a href="#ref-R-tidyverse" role="doc-biblioref">Wickham et al., 2019</a>)</span> and <em>tinylabels</em> <span class="citation" data-cites="R-tinylabels">(Version 0.2.4; <a href="#ref-R-tinylabels" role="doc-biblioref">Barth, 2023</a>)</span> to prepare this document.</p>
<section id="tables" class="level3">
<h3 data-anchor-id="tables">Tables</h3>
<p>In this section, we will go over how to create, render, and reference tables in apaquarto documents.</p>
<p>For tables produced by executable code cells, include a label with a <code>tbl-</code> prefix to make them cross-referenceable. For example:</p>
<div class="cell FigureWithoutNote" prefix="" data-tblnum="1" data-custom-style="FigureWithoutNote">
<div id="tbl-iris" class="cell quarto-float quarto-figure quarto-figure-center" prefix="" data-tblnum="1">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-iris-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Table&nbsp;1</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Iris Data</p>
</div>
</figcaption>
<div aria-describedby="tbl-iris-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Sepal.Length</th>
<th style="text-align: right;">Sepal.Width</th>
<th style="text-align: right;">Petal.Length</th>
<th style="text-align: right;">Petal.Width</th>
<th style="text-align: left;">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: left;">setosa</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="AfterWithoutNote" data-custom-style="AfterWithoutNote">
<p>In the chunk above, I produce <a href="#tbl-iris" class="quarto-xref" aria-expanded="false">Table&nbsp;1</a> a table of the first five rows of the <code>iris</code> dataset. It renders from the chunk (it is not saved to an object) at the location of the chunk in the manuscript. I can reference this table in the text as <code>@tbl-iris</code>, which will render as “Table 1” in the rendered document.</p>
</div>
<p><a href="#tbl-iris" class="quarto-xref" aria-expanded="false">Table&nbsp;1</a>, when rendered, has three components:</p>
<ol type="1">
<li>The table itself</li>
<li>The table <em>label</em>, which is the word “Table” and the generated number in the order it was rendered</li>
<li>The table caption, which is the title of the table</li>
</ol>
<p>Take note that the <code>tbl-cap</code> option that assigned the “caption” is actually assigning with APA7 would refer to as the “title” of the table.</p>
<p>There are several important things to note about the simple figure chunk above:</p>
<ol type="1">
<li>The chunk options are in the “comment style” format. They are preceded by <code>#|</code> and are within the chunk, not the chunk header (the ```<code>{r}</code> part).</li>
<li>The first chunk option, label, is in the line <em>immediately following the chunk header</em>. This is important for the table to be recognized as a table. If there is anything above the label, including comments and whitespace, the table will not render as a table and the document may not render at all without error</li>
<li>The label begins with “tbl-”, which tells apaquarto that this is a table. If the chunk has any other name, it will still render images in the chunk (including generated plots), but they will not be recognized as tables.</li>
<li>The caption in the <code>tbl-cap</code> option. As discussed above, this “caption” is the title of the table and should be in title case, with no period.</li>
</ol>
</section>
</section>
<section id="results" class="level2">
<h2 data-anchor-id="results">Results</h2>
<!-- This section will feature use of figures. -->
<p>Figures can be created in R chunks and rendered as figures in the text. They can be referenced in the text and will be numbered in the order they are rendered.</p>
<section id="figure-chunk-options" class="level3">
<h3 data-anchor-id="figure-chunk-options">Figure Chunk Options</h3>
<p>Figure chunks should use the quarto-preferred “comment style” chunk option settings. Minimally, they should include a label and a caption. The label should begin with “fig-” to be recognized as a figure. The caption should be a string in title case. The image (file or object) should be rendered in the chunk.</p>
<div class="cell FigureWithoutNote" data-custom-style="FigureWithoutNote">
<div class="cell-output-display">
<div id="fig-iris-rendered-plot" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="1">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-iris-rendered-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;1</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>The “Caption” (aka Title) of a Rendered Plot</p>
</div>
</figcaption>
<div aria-describedby="fig-iris-rendered-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="apaquarto-manuscript_files/figure-html/fig-iris-rendered-plot-1.svg" class="img-fluid figure-img" width="624">
</div>
</figure>
</div>
</div>
</div>
<div class="AfterWithoutNote" data-custom-style="AfterWithoutNote">
<p>In the chunk above, I produce <a href="#fig-iris-rendered-plot" class="quarto-xref" aria-expanded="false">Figure&nbsp;1</a> a scatterplot of the <code>iris</code> dataset. It renders from the chunk (it is not saved to an object) at the location of the chunk in the manuscript. I can reference this plot in the text as <code>@fig-iris-rendered-plot</code>, which will render as “Figure 1” in the rendered document.</p>
</div>
<p><a href="#fig-iris-rendered-plot" class="quarto-xref" aria-expanded="false">Figure&nbsp;1</a>, when rendered, has three components:</p>
<ol type="1">
<li>The plot itself</li>
<li>The figure <em>label</em>, which is the word “Figure” and the generated number in the order it was rendered</li>
<li>The figure caption, which is the title of the plot</li>
</ol>
<p>Take note that the <code>fig-cap</code> option that assigned the “caption” is actually assigning with APA7 would refer to as the “title” of the figure. The thing you probably think of when you hear caption – the explanatory text below the figure – is called a “note.” There is an option to include a note, but it is not required or included in this minimal example.</p>
<p>There are several important things to note about the simple figure chunk above:</p>
<ol type="1">
<li>The chunk options are in the “comment style” format. They are preceded by <code>#|</code> and are within the chunk, not the chunk header (the ```<code>{r}</code> part).</li>
<li>The first chunk option, label, is in the line <em>immediately following the chunk header</em>. This is important for the figure to be recognized as a figure. If there is anything above the label, including comments and whitespace, the figure will not render as a figure and the document may not render at all without error</li>
<li>The label begins with “fig-”, which tells apaquarto that this is a figure. If the chunk has any other name, it will still render images in the chunk (including generated plots), but they will not be recognized as figures.</li>
<li>The caption in the <code>fig-cap</code> option. As discussed above, this “caption” is the title of the figure and should be in title case, with no period.</li>
</ol>
<p><a href="#fig-iris-rendered-plot" class="quarto-xref" aria-expanded="false">Figure&nbsp;1</a> is rendered by actually creating a ggplot in the chunk. However, you can also create a ggplot object elsewhere and render it as a figure. This is useful if you want to use the same plot in multiple places in the document, or if you want to create a very complicated plot in a sourced script.</p>
<p>Creating a chunk that assigns a plot to an object does not render the plot, since R code that assigns an object does not return anything. It only creates the object <code>iris_plot</code>. To render the plot, you need to call the object in a chunk with the figure options.</p>
<div class="cell FigureWithoutNote" data-custom-style="FigureWithoutNote">
<div class="cell-output-display">
<div id="fig-iris-plot-object" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="2">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-iris-plot-object-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;2</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>The Caption of a Rendered Plot Object</p>
</div>
</figcaption>
<div aria-describedby="fig-iris-plot-object-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="apaquarto-manuscript_files/figure-html/fig-iris-plot-object-1.svg" class="img-fluid figure-img" width="624">
</div>
</figure>
</div>
</div>
</div>
<div class="AfterWithoutNote" data-custom-style="AfterWithoutNote">
<p>I can render the plot in a separate chunk by calling the plot object <code>iris_plot</code> in the chunk. This will render the plot as a figure in the text. I can reference this plot as <a href="#fig-iris-plot-object" class="quarto-xref" aria-expanded="false">Figure&nbsp;2</a>.</p>
</div>
<p>Quarto, and the apaquarto extension, can accept many additional chunk options. Like the label and caption options, these are set in the comment style within the chunk. Here are some additional options that can be used in figure chunks:</p>
<ol type="1">
<li><code>apa-note</code>: A note that appears below the figure caption. This is the explanatory text that you might think of as a “caption” in other contexts. Unlike the options that follow, this is a feature of apaquarto specifically, not markdown or Quarto.</li>
<li><code>fig-scap</code>: A short caption that appears in the list of figures. This is useful for long figure captions that are unwieldy in a list of figures.</li>
<li><code>fig-alt</code>: Alt text for accessibility. This will appear if you render as HTML and is useful for screen readers.</li>
<li><code>fig-align</code>: The alignment of the figure. This can be “left”, “right”, or “center” (the default).</li>
<li><code>fig-width</code> and <code>fig-height</code>: The width and height of the figure in inches. This is useful for controlling the size of the figure in the rendered document. The default is 7 inches wide and 5 inches tall.</li>
</ol>
<div class="cell FigureWithNote" data-layout-align="right" data-apa-note="A note appearing below the figure." data-custom-style="FigureWithNote">
<div class="cell-output-display">
<div id="fig-plot-more-options" class="quarto-float quarto-figure quarto-figure-right" prefix="" data-fig-align="right" alt="Alt text for accessibility" data-fig-scap="Short Cap. For Fig. Lists" data-fignum="3">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-plot-more-options-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;3</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>A Plot With More Chunk Options</p>
</div>
</figcaption>
<div aria-describedby="fig-plot-more-options-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="apaquarto-manuscript_files/figure-html/fig-plot-more-options-1.svg" class="img-fluid quarto-figure quarto-figure-right figure-img" data-fig-scap="Short Cap. For Fig. Lists" alt="Alt text for accessibility" width="480">
</div>
</figure>
</div>
</div>
</div>
<div class="FigureNote" data-custom-style="FigureNote">
<p><em>Note</em>. A note appearing below the figure.</p>
</div>
<p>You can see all the effects of these chunk options in <a href="#fig-plot-more-options" class="quarto-xref" aria-expanded="false">Figure&nbsp;3</a>. The figure is aligned to the right, has a width of 5 inches and a height of 6 inches, and has a note below the caption. The short caption is what will appear in the list of figures, and the alt text will appear when a reader mouses over the figure in an HTML document (it does not do anything in pdf or Word documents).</p>
<section id="referencing-figures" class="level4">
<h4 data-anchor-id="referencing-figures">Referencing figures.</h4>
<p>As seen in the text above, figures can be referenced in text using the <code>@</code> symbol followed by the figure label. This will render as “Figure X” in the rendered document, where X is the order in which the figure was rendered. The figure label should be unique and begin with “fig-” to be recognized as a figure.</p>
<p>Plots are the only thing that count as figures. In APA documents, all images are typically treated as figures. You can include images as figures in your document by rendering them in a chunk using the <code>include_graphics()</code> function from the knitr package. Like with any other figure, the chunk required a label beginning with “fig-” and a caption and may take additional chunk options.</p>
<p>For images, it’s usually better to use <code>out-width</code> or <code>out-height</code> rather than <code>fig-width</code> and <code>fig-height</code>. The image files already have an inherent size (unlike rendered plots), which can create problems when you try to give them new absolute dimensions (with the <code>fig-</code> options). The <code>out-</code> options let you use a relative sizing as a percentage, which is usually more reliable.</p>
<div class="cell FigureWithNote" data-apa-note="From xkcd (#2456) by Randall Monroe" data-custom-style="FigureWithNote">
<div class="cell-output-display">
<div id="fig-xkcd-sci-papers" class="quarto-float quarto-figure quarto-figure-center" prefix="" alt="Others include &quot;We have incrementally improved the estimate of this coefficient,&quot; &quot;Maybe all these categories are wrong,&quot; and &quot;We found a way to make student volunteers worse at tasks.&quot;" data-fignum="4">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-xkcd-sci-papers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;4</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Types of Scientific Papers</p>
</div>
</figcaption>
<div aria-describedby="fig-xkcd-sci-papers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/xkcd-scientific-papers.png" class="img-fluid figure-img" style="width:40.0%" alt="Others include &quot;We have incrementally improved the estimate of this coefficient,&quot; &quot;Maybe all these categories are wrong,&quot; and &quot;We found a way to make student volunteers worse at tasks.&quot;">
</div>
</figure>
</div>
</div>
</div>
<div class="FigureNote" data-custom-style="FigureNote">
<p><em>Note</em>. From xkcd (#2456) by Randall Monroe</p>
</div>
<p>Why not take the opportunity to look at a few more xkcd comics?</p>
<p>When you knit this document to a pdf, knitr/Quarto will try to pick the best location to include it. If your image is very large, or if there is very little text between images, the location it chooses may not be precisely where you put the chunk. You can force the image to render exactly where the chunk is with the option <code>fig-pos: "H"</code>. Either way–the default or the forced hold–can produce unexpected consequences, so keep an eye out for issues and try out alternatives as needed.</p>
<p>Back to xkcd. Here’s a good one about types of eclipses:</p>
<div class="cell FigureWithNote" data-apa-note="From xkcd (#1880) by Randall Monroe" data-custom-style="FigureWithNote">
<div class="cell-output-display">
<div id="fig-xkcd-eclipses" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="5" data-fig-pos="H">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-xkcd-eclipses-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;5</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Types of Eclipses</p>
</div>
</figcaption>
<div aria-describedby="fig-xkcd-eclipses-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/xkcd-eclipses.png" class="img-fluid figure-img" data-fig-pos="H" width="213">
</div>
</figure>
</div>
</div>
</div>
<div class="FigureNote" data-custom-style="FigureNote">
<p><em>Note</em>. From xkcd (#1880) by Randall Monroe</p>
</div>
<p>And of course there’s this classic about literally everyone’s experience using git:</p>
<div class="cell FigureWithNote" data-apa-note="From xkcd (#1597) by Randall Monroe" data-custom-style="FigureWithNote">
<div class="cell-output-display">
<div id="fig-xkcd-git" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="6">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-xkcd-git-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;6</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>The Tragedy of git</p>
</div>
</figcaption>
<div aria-describedby="fig-xkcd-git-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/xkcd-git.png" class="img-fluid figure-img" width="165">
</div>
</figure>
</div>
</div>
</div>
<div class="FigureNote" data-custom-style="FigureNote">
<p><em>Note</em>. From xkcd (#1597) by Randall Monroe</p>
</div>
<p>Love a good xkcd. They’re all great, but right now <a href="#fig-xkcd-git" class="quarto-xref" aria-expanded="false">Figure&nbsp;6</a> really speaks to me. (You too, maybe?) <a href="#fig-xkcd-eclipses" class="quarto-xref" aria-expanded="false">Figure&nbsp;5</a> is good and it’s got a plot, but it’s not as relevant to our class as <a href="#fig-xkcd-sci-papers" class="quarto-xref" aria-expanded="false">Figure&nbsp;4</a> or <a href="#fig-xkcd-git" class="quarto-xref" aria-expanded="false">Figure&nbsp;6</a>.</p>
<p>I have a point. Notice that the numbers assigned to each figure are based on the order in which they are rendered, not the order in which they are referenced.</p>
</section>
</section>
<section id="analyses-inline-code" class="level3">
<h3 data-anchor-id="analyses-inline-code">Analyses &amp; Inline Code</h3>
<p>In this section, we discuss running and referencing statistical analyses.</p>
<p>A critical component of using our D2MR workflow for reproducible research is the ability to seamlessly integrate references to objects and object elements into the narrative text of your publication. When you run a model or summary and then identify coefficients, summary stats, or other important values in the output, you <em>could</em> type out those values as literal, static text. This is not only time-consuming, it problematically opens the door for significant human error each time the values must be manually updated.</p>
<p>Inline R code is an alternative that allows you to replace this static text with dynamic code. Rather than changing the <span class="math inline">\beta</span>, <span class="math inline">p</span>-value, mean, etc. every time any tiny thing in your data or code processes change, the values are calculated during the knitting process. You add the code once, then (ideally) never need to modify it so long as the structure of your data and modeling stays the same.</p>
<p>Fundamentally, think about inline R code as a teeny-tiny code chunk that takes the “1-chunk-1-thing” rule to the extreme, so much so that the output of the whole thing is the same kind of thing you’d just type into a Word document otherwise. Everything within the code will run exactly like it’s run in the console, meaning you can always quickly check how it will render when knit by just copying and pasting that code into your console in RStudio.</p>
<p>The general format for inline R is a backtick<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, then a space, then as much code as you like (remember, literally what you’d see if you copied and pasted it into the console), then a closing backtick:</p>
<p><code>`r yourCodeHere()`</code></p>
<section id="referencing-values-from-lists-and-tibbles" class="level4">
<h4 data-anchor-id="referencing-values-from-lists-and-tibbles">Referencing values from lists and tibbles.</h4>
<p>In the following chunk, I create a vector, a list, and a tibble. These are basic R objects you’ll need to extract references from often.</p>
<p>To reference a value from a vector, list, or tibble, you need to know the index of the value you want to reference. In R, indexing starts at 1<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, so the first element of a vector, list, or tibble is at index 1. You can reference the value at a specific index by using the object name followed by square brackets containing the index. For example, to reference the second element of a vector <code>ex_vector</code>, you would write <code>ex_vector[2]</code>: 30.</p>
<p>If you’ve got a list that is really a list and not a vector that you’re casually calling a “list,” it’s a little weirder. List objects look like a series of values, but they are actually a series of other lists. If you referenced the second element of a list object <code>ex_list</code> with <code>ex_list[2]</code>, you would get a list that contains the second element: 30.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> To get the actual value, you need to reference the index of the value within the list. For example, to reference the second element of a list object <code>ex_list</code>, you would write <code>ex_list[[2]]</code>: 30.</p>
<p>You can reference values from a tibble in the same way you would reference values from a vector, but you have to index both the row and column. For example, to reference the value in the second row and third column of a tibble <code>ex_tibble</code>, you would write <code>ex_tibble[2, 3]</code>: 75.</p>
<p>You can also use brackets to index by names. In a tibble, that usually means column/variable names, but you could use row names if your df has them. For example, to reference the value in the second row and the column named “mass” in a tibble <code>ex_tibble</code>, you would write <code>ex_tibble[2, "mass"]</code> to get the same as the above <code>ex_tibble[2,3]</code>: 75.</p>
<p>In your code, you’ll often need to reference whole columns or rows, which you can do by omitting a value on either side of the comma. So to get the second row of <code>ex_tibble</code>, you would write <code>ex_tibble[2, ]</code>: C-3PO, 167, 75, c(“A New Hope”, “The Empire Strikes Back”, “Return of the Jedi”, “The Phantom Menace”, “Attack of the Clones”, “Revenge of the Sith”).</p>
<p>You <em>can</em> call a tibble <em>row</em> in markdown and render it as text.</p>
<p>To get the column named “mass” from <code>ex_tibble</code>, you would write <code>ex_tibble[, "mass"]</code>. If you don’t include the comma, it will assume you want the variable. So <code>ex_tibble["mass"]</code> will return the column named “mass”. More commonly, if you want to call a column or row, you can use the <code>$</code> operator. For example, to reference the column named “mass” from <code>ex_tibble</code>, you would write <code>ex_tibble$mass</code>. <!-- notice that all these are just backticks to display verbatim code, not inline r code --></p>
<p>You <em>cannot</em> call a tibble <em>column</em> in markdown and render it as text. (What would that even look like?)</p>
</section>
</section>
<section id="tips-and-tricks" class="level3">
<h3 data-anchor-id="tips-and-tricks">Tips and Tricks</h3>
<p>The <strong><code>apa_p()</code> function</strong> from the <code>papaja</code> package can be used to format p-values in APA style. It handles rounding, and prevents the p-value from being displayed as <code>0.000</code> when it is very small.</p>
<p>Use the <strong><code>broom</code> package</strong> to extract values from model objects. The <code>tidy()</code> function extracts coefficients and other values from a model object, and the <code>glance()</code> function extracts model-level statistics.</p>
<p><strong>Store common text</strong> as objects in your R script. This can be useful for text that is repeated throughout the document, especially if it’s text that you may want to change later. For example, in the Language Development Project (a dataset I frequently work with) there are two cohorts of children. The first is a group of children who are “typically developing,” and the second is a group of children with perinatal brain lesions. The latter group is referred to by a handful of different names depending on the context of the publication, e.g., “atypically developing”, “perinatal brain lesion”, “brain lesion”, “brain injury”, etc. I can store the variable <code>group2 &lt;- "perinatal brain lesion"</code> and use it throughout the document. If I need to change the name of the group, I only need to reassign <code>group2 &lt;- "brain injury"</code> in one place.</p>
<p><strong>Write your own functions</strong> for commonly reported results. For example, you can write a function that takes a model object as an argument and returns a string with the results of the model. This can be useful for reporting results in APA style.</p>
<p>As an example, start by building a simple linear regression model with the <code>mtcars</code> dataset. Does vehicle weight predict fuel efficiency?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a simple linear regression model</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can use the <code>tidy()</code> function and the <code>apa_p()</code> function to extract and format the coefficients and p-values from the model object and print into a string.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># report_regression takes a lm model object as an argument</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and returns a string of format:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "$F$(df, df.residual) = F-value, $p$ = p-value, $R^2$ = r-squared"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>report_regression <span class="ot">&lt;-</span> <span class="cf">function</span>(model) {</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract coefficients and p-values</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  m_glance <span class="ot">&lt;-</span> <span class="fu">glance</span>(model)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Format the p-value</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  p_value <span class="ot">&lt;-</span> <span class="fu">apa_p</span>(m_glance<span class="sc">$</span>p.value, <span class="at">add_equals =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a string with the results</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  report <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"$F$("</span>, </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                   m_glance<span class="sc">$</span>df, </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                   <span class="st">", "</span>, m_glance<span class="sc">$</span>df.residual, </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                   <span class="st">") = "</span>, <span class="fu">round</span>(m_glance<span class="sc">$</span>statistic, <span class="dv">2</span>), </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                   <span class="st">", $p$ = "</span>, p_value, <span class="st">", $R^2$ = "</span>, <span class="fu">round</span>(m_glance<span class="sc">$</span>r.squared,<span class="dv">2</span>))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(report)    </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># report_beta takes a lm model object and a variable name (string) as arguments</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co"># and returns a string of format:</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co"># "beta = beta-value, se = se-value, p = p-value"</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>report_beta <span class="ot">&lt;-</span> <span class="cf">function</span>(model, var) {</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract coefficients and p-values</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  var_tidy <span class="ot">&lt;-</span> <span class="fu">tidy</span>(model) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(term <span class="sc">==</span> var)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Format the p-value</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  p_value <span class="ot">&lt;-</span> <span class="fu">apa_p</span>(var_tidy<span class="sc">$</span>p.value, <span class="at">add_equals =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a string with the results</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  report <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"$</span><span class="sc">\\</span><span class="st">beta$ = "</span>, <span class="fu">round</span>(var_tidy<span class="sc">$</span>estimate, <span class="dv">2</span>),</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>                   <span class="st">", $se$ = "</span>, <span class="fu">round</span>(var_tidy<span class="sc">$</span>std.error, <span class="dv">2</span>),</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>                   <span class="st">", $p$ = "</span>, p_value</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(report)    </span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Reporting the results of the regression model created in the previous chunk <em>with static text</em> would look like:</p>
<p>A simple linear regression was conducted to predict fuel efficiency from vehicle weight. The model significantly predicted miles per gallon, <em>F</em>(1, 30) = 91.38, <em>p</em> &lt; .001, R² = .75. Vehicle weight was a significant predictor (<em>β</em> = -5.34, <em>p</em> &lt; .001), indicating that for each additional thousand pounds of weight, fuel efficiency decreased by 5.34 miles per gallon.</p>
<p>Reporting the results of the regression model created in the previous chunk <em>with inline R code</em> would look like:</p>
<p>A simple linear regression was conducted to predict fuel efficiency from vehicle weight. The model significantly predicted miles per gallon, <span class="math inline">F</span>(1, 30) = 91.38, <span class="math inline">p</span> = &lt; .001, <span class="math inline">R^2</span> = 0.75. Vehicle weight was a significant predictor (<span class="math inline">\beta</span> = -5.34, <span class="math inline">se</span> = 0.56, <span class="math inline">p</span> = &lt; .001), indicating that for each additional thousand pounds of weight, fuel efficiency decreased by 5.34 miles per gallon.</p>
</section>
<section id="common-issues" class="level3">
<h3 data-anchor-id="common-issues">Common Issues</h3>
<p>Are you getting errors referring to packages, installation, CRAN, or other library-related things? First check that all necessary packages are installed on your system. Then check that nothing in your document <em>or sourced files</em> includes code that would prompt R to install or update a package that is already loaded. It’s good practice to load all necessary packages at the beginning of your document. If your code requires uncommon or non-CRAN packages that a user is likely to need to install before running, include a comment noting that at the beginning of your document. Optionally (and required in D2MR), include a <strong>commented out</strong> line of code that will install the package if it is not already installed <em>if the user chooses to uncomment the line.</em></p>
<p>Something knitting in a way you didn’t expect? Check that the class of your output is what you think it should be. In particular, if you want something to appear as regular-old in-line text, it needs to be a <em>value</em> data type, like numeric, character, or logical. The <code>cor()</code> function, for example, results in a simple numeric value, while the <code>cor.test()</code> function results in an “htest” object. That object contains numeric values you can extract and reference, but if you try to reference it directly it won’t knit.</p>
<p>Are inline references to tables, figures, sections, or citations rendering as “??” and/or the literal reference in bold (e.g., “Figure <strong>??</strong>” or <strong>smith2017??</strong>)? Check that the key you’re using is identical to the chunk label or bibtex citation key. Did you use the <code>fig-</code> or <code>tab-</code> prefix for both the chunk label and the reference? Did you use the <code>@</code> symbol before the citation key? Did a Zotero update the citation key format in your .bib file?</p>
<p>Tables or figures being weird or not displaying at all? Tables are the worst, and there’s a lot of things that can go wrong with them. Figures aren’t as bad, but still prone to many of the same problems. The first things to check are:</p>
<ol type="1">
<li>Did you use the <code>tbl-</code> / <code>fig-</code> prefix in the chunk label?</li>
<li>Did you include the <code>tbl-cap</code> / <code>fig-cap</code> option in the chunk?</li>
<li>Is your chunk actually returning a table/figure at all, or is it assigning the table/figure to an object that you didn’t actual call in the chunk?</li>
<li>Is the chunk returning HTML, LaTeX, or text in any other format or markup language? Add <code>results = "asis"</code> to the chunk header to ensure that the output is rendered “as-is,” i.e., actually processing the markup rather than displaying the literal output. (Personally I find this very counterintuitive. Wouldn’t it make more sense if “asis” meant “don’t process the markup”? Is what it is.)</li>
</ol>
<p>If you’re still having trouble, try running the chunk in a separate R script to see if it’s a problem with the chunk or with the document. If it runs fine in the script, try running the script in the document to see if it’s a problem with the chunk options or the document structure.</p>

</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-R-papaja" class="csl-entry" role="listitem">
Aust, F., &amp; Barth, M. (2024). <em><span class="nocase">papaja</span>: <span>Prepare</span> reproducible <span>APA</span> journal articles with <span>R Markdown</span></em>. <a href="https://doi.org/10.32614/CRAN.package.papaja">https://doi.org/10.32614/CRAN.package.papaja</a>
</div>
<div id="ref-R-tinylabels" class="csl-entry" role="listitem">
Barth, M. (2023). <em><span class="nocase">tinylabels</span>: Lightweight variable labels</em>. <a href="https://cran.r-project.org/package=tinylabels">https://cran.r-project.org/package=tinylabels</a>
</div>
<div id="ref-bavelasetal_1992_interactive" class="csl-entry" role="listitem">
Bavelas, J. B., Chovil, N., Lawrie, D. A., &amp; Wade, A. (1992). Interactive gestures. <em>Discourse Processes</em>, <em>15</em>(4), 469–489. <a href="https://doi.org/10.1080/01638539209544823">https://doi.org/10.1080/01638539209544823</a>
</div>
<div id="ref-R-shiny" class="csl-entry" role="listitem">
Chang, W., Cheng, J., Allaire, J., Sievert, C., Schloerke, B., Xie, Y., Allen, J., McPherson, J., Dipert, A., &amp; Borges, B. (2024). <em>Shiny: Web application framework for r</em>. <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>
</div>
<div id="ref-dowling_2022_obviously" class="csl-entry" role="listitem">
Dowling, N. (2022). <em>Obviously <span>I Don</span>’t <span>Know</span> but <span>Whatever</span>: <span>Emblematic</span> and <span>Pragmatic Uses</span> of <span>Shrug Gestures</span> in <span>Early Childhood</span> and <span>Adolescence</span></em> [PhD thesis, The University of Chicago]. <a href="https://doi.org/10.6082/uchicago.4897">https://doi.org/10.6082/uchicago.4897</a>
</div>
<div id="ref-dowling_2025_data" class="csl-entry" role="listitem">
Dowling, N. (2025). <em>From <span>Data</span> to <span>Manuscript</span> in <span>R</span> – <span>D2MR</span></em> [Course Website]. <a href="https://nrdowling.com/d2mr/">https://nrdowling.com/d2mr/</a>
</div>
<div id="ref-R-flextable" class="csl-entry" role="listitem">
Gohel, D., &amp; Skintzos, P. (2024). <em>Flextable: Functions for tabular reporting</em>. <a href="https://CRAN.R-project.org/package=flextable">https://CRAN.R-project.org/package=flextable</a>
</div>
<div id="ref-R-lubridate" class="csl-entry" role="listitem">
Grolemund, G., &amp; Wickham, H. (2011). Dates and times made easy with <span class="nocase">lubridate</span>. <em>Journal of Statistical Software</em>, <em>40</em>(3), 1–25. <a href="https://www.jstatsoft.org/v40/i03/">https://www.jstatsoft.org/v40/i03/</a>
</div>
<div id="ref-heritage_2012_epistemics" class="csl-entry" role="listitem">
Heritage, J. (2012a). Epistemics in <span>Action</span>: <span>Action Formation</span> and <span>Territories</span> of <span>Knowledge</span>. <em>Research on Language &amp; Social Interaction</em>, <em>45</em>(1), 1–29. <a href="https://doi.org/10.1080/08351813.2012.646684">https://doi.org/10.1080/08351813.2012.646684</a>
</div>
<div id="ref-heritage_2012_epistemic" class="csl-entry" role="listitem">
Heritage, J. (2012b). The <span>Epistemic Engine</span>: <span>Sequence Organization</span> and <span>Territories</span> of <span>Knowledge</span>. <em>Research on Language &amp; Social Interaction</em>, <em>45</em>(1), 30–52. <a href="https://doi.org/10.1080/08351813.2012.646685">https://doi.org/10.1080/08351813.2012.646685</a>
</div>
<div id="ref-R-tibble" class="csl-entry" role="listitem">
Müller, K., &amp; Wickham, H. (2023). <em>Tibble: Simple data frames</em>. <a href="https://CRAN.R-project.org/package=tibble">https://CRAN.R-project.org/package=tibble</a>
</div>
<div id="ref-R-base" class="csl-entry" role="listitem">
R Core Team. (2024). <em>R: A language and environment for statistical computing</em>. R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>
</div>
<div id="ref-R-broom" class="csl-entry" role="listitem">
Robinson, D., Hayes, A., &amp; Couch, S. (2024). <em>Broom: Convert statistical objects into tidy tibbles</em>. <a href="https://CRAN.R-project.org/package=broom">https://CRAN.R-project.org/package=broom</a>
</div>
<div id="ref-schneider_2025_apaquarto" class="csl-entry" role="listitem">
Schneider, W. J. (2025). <em>Apaquarto</em>. <a href="https://github.com/wjschne/apaquarto">https://github.com/wjschne/apaquarto</a>
</div>
<div id="ref-R-ggplot2" class="csl-entry" role="listitem">
Wickham, H. (2016b). <em>ggplot2: Elegant graphics for data analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>
</div>
<div id="ref-wickham_2016_ggplot2" class="csl-entry" role="listitem">
Wickham, H. (2016a). <em>Ggplot2: <span>Elegant Graphics</span> for <span>Data Analysis</span></em> (2nd ed. 2016 edition). Springer.
</div>
<div id="ref-R-conflicted" class="csl-entry" role="listitem">
Wickham, H. (2023a). <em>Conflicted: An alternative conflict resolution strategy</em>. <a href="https://CRAN.R-project.org/package=conflicted">https://CRAN.R-project.org/package=conflicted</a>
</div>
<div id="ref-R-forcats" class="csl-entry" role="listitem">
Wickham, H. (2023b). <em>Forcats: Tools for working with categorical variables (factors)</em>. <a href="https://CRAN.R-project.org/package=forcats">https://CRAN.R-project.org/package=forcats</a>
</div>
<div id="ref-R-stringr" class="csl-entry" role="listitem">
Wickham, H. (2023c). <em>Stringr: Simple, consistent wrappers for common string operations</em>. <a href="https://CRAN.R-project.org/package=stringr">https://CRAN.R-project.org/package=stringr</a>
</div>
<div id="ref-R-tidyverse" class="csl-entry" role="listitem">
Wickham, H., Averick, M., Bryan, J., Chang, W., McGowan, L. D., François, R., Grolemund, G., Hayes, A., Henry, L., Hester, J., Kuhn, M., Pedersen, T. L., Miller, E., Bache, S. M., Müller, K., Ooms, J., Robinson, D., Seidel, D. P., Spinu, V., … Yutani, H. (2019). Welcome to the <span class="nocase">tidyverse</span>. <em>Journal of Open Source Software</em>, <em>4</em>(43), 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>
</div>
<div id="ref-wickhametal_2023_data" class="csl-entry" role="listitem">
Wickham, H., Cetinkaya-Rundel, M., &amp; Grolemund, G. (2023). <em>R for <span>Data Science</span>: <span>Import</span>, <span>Tidy</span>, <span>Transform</span>, <span>Visualize</span>, and <span>Model Data</span></em> (2nd edition). O’Reilly Media.
</div>
<div id="ref-R-dplyr" class="csl-entry" role="listitem">
Wickham, H., François, R., Henry, L., Müller, K., &amp; Vaughan, D. (2023). <em>Dplyr: A grammar of data manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>
</div>
<div id="ref-R-purrr" class="csl-entry" role="listitem">
Wickham, H., &amp; Henry, L. (2025). <em>Purrr: Functional programming tools</em>. <a href="https://CRAN.R-project.org/package=purrr">https://CRAN.R-project.org/package=purrr</a>
</div>
<div id="ref-R-readr" class="csl-entry" role="listitem">
Wickham, H., Hester, J., &amp; Bryan, J. (2024). <em>Readr: Read rectangular text data</em>. <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>
</div>
<div id="ref-R-tidyr" class="csl-entry" role="listitem">
Wickham, H., Vaughan, D., &amp; Girlich, M. (2024). <em>Tidyr: Tidy messy data</em>. <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>
</div>
<div id="ref-R-knitr" class="csl-entry" role="listitem">
Xie, Y. (2015). <em>Dynamic documents with <span>R</span> and knitr</em> (2nd ed.). Chapman; Hall/CRC. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>
</div>
<div id="ref-xie_2018_bookdown" class="csl-entry" role="listitem">
Xie, Y. (2018). <em>Bookdown: <span>Authoring Books</span> and <span>Technical Documents</span> with <span>R Markdown</span></em>. <a href="https://bookdown.org/yihui/bookdown/">https://bookdown.org/yihui/bookdown/</a>
</div>
<div id="ref-R-ftExtra" class="csl-entry" role="listitem">
Yasumoto, A. (2024). <em>ftExtra: Extensions for ’flextable’</em>. <a href="https://CRAN.R-project.org/package=ftExtra">https://CRAN.R-project.org/package=ftExtra</a>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Sure this isn’t relevant to anything else, but it’s a great excuse to demo <code>citr</code> and talk about gesture at the same time!<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>If you want to make something appear as “verbatim” text that looks like code the way it shows up in this notebook, surround it in backticks without the “r” in front: <code>`verbatim text`</code>. If you want to include backticks within the literal code, smash your head against your desk until you give up.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>This is probably the biggest reason I will never be a python person. I’m team counting-starts-at-1 all the way. It’s the <em>1st</em> thing! There’s a 1 right in the name!<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Quarto is actually smart enough to know you’re trying to reference the value and not the list, so if you use this in your markdown it will knit to the value. But if you’re actually using it for any kind of programming (not just printing directly), you’ll need to use the correct data type.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>